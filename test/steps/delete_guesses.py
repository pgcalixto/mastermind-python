from itertools import product
from behave import given, when, then
from mastermind import main

@given('I have an answer for a player guess')
def step_impl(context):
    code = '2222'
    context.guess = '1111'
    context.answer = main.check_answer(code, context.guess)

@when('I get the list of possible codes for this guess and the answer')
def step_impl(context):

    guesses = [''.join(x) for x in product('123456', repeat=4)]
    context.retrieved = main.get_possible_guesses(guesses, context.guess,
                                                  context.answer)

@then('I have the expected list of possible codes')
def step_impl(context):

    expected = ['1111', '1112', '1113', '1114', '1115', '1116', '1121', '1122',
                '1123', '1124', '1125', '1126', '1131', '1132', '1133', '1134',
                '1135', '1136', '1141', '1142', '1143', '1144', '1145', '1146',
                '1151', '1152', '1153', '1154', '1155', '1156', '1161', '1162',
                '1163', '1164', '1165', '1166', '1211', '1212', '1213', '1214',
                '1215', '1216', '1221', '1222', '1223', '1224', '1225', '1226',
                '1231', '1232', '1233', '1234', '1235', '1236', '1241', '1242',
                '1243', '1244', '1245', '1246', '1251', '1252', '1253', '1254',
                '1255', '1256', '1261', '1262', '1263', '1264', '1265', '1266',
                '1311', '1312', '1313', '1314', '1315', '1316', '1321', '1322',
                '1323', '1324', '1325', '1326', '1331', '1332', '1333', '1334',
                '1335', '1336', '1341', '1342', '1343', '1344', '1345', '1346',
                '1351', '1352', '1353', '1354', '1355', '1356', '1361', '1362',
                '1363', '1364', '1365', '1366', '1411', '1412', '1413', '1414',
                '1415', '1416', '1421', '1422', '1423', '1424', '1425', '1426',
                '1431', '1432', '1433', '1434', '1435', '1436', '1441', '1442',
                '1443', '1444', '1445', '1446', '1451', '1452', '1453', '1454',
                '1455', '1456', '1461', '1462', '1463', '1464', '1465', '1466',
                '1511', '1512', '1513', '1514', '1515', '1516', '1521', '1522',
                '1523', '1524', '1525', '1526', '1531', '1532', '1533', '1534',
                '1535', '1536', '1541', '1542', '1543', '1544', '1545', '1546',
                '1551', '1552', '1553', '1554', '1555', '1556', '1561', '1562',
                '1563', '1564', '1565', '1566', '1611', '1612', '1613', '1614',
                '1615', '1616', '1621', '1622', '1623', '1624', '1625', '1626',
                '1631', '1632', '1633', '1634', '1635', '1636', '1641', '1642',
                '1643', '1644', '1645', '1646', '1651', '1652', '1653', '1654',
                '1655', '1656', '1661', '1662', '1663', '1664', '1665', '1666',
                '2111', '2112', '2113', '2114', '2115', '2116', '2121', '2122',
                '2123', '2124', '2125', '2126', '2131', '2132', '2133', '2134',
                '2135', '2136', '2141', '2142', '2143', '2144', '2145', '2146',
                '2151', '2152', '2153', '2154', '2155', '2156', '2161', '2162',
                '2163', '2164', '2165', '2166', '2211', '2212', '2213', '2214',
                '2215', '2216', '2221', '2231', '2241', '2251', '2261', '2311',
                '2312', '2313', '2314', '2315', '2316', '2321', '2331', '2341',
                '2351', '2361', '2411', '2412', '2413', '2414', '2415', '2416',
                '2421', '2431', '2441', '2451', '2461', '2511', '2512', '2513',
                '2514', '2515', '2516', '2521', '2531', '2541', '2551', '2561',
                '2611', '2612', '2613', '2614', '2615', '2616', '2621', '2631',
                '2641', '2651', '2661', '3111', '3112', '3113', '3114', '3115',
                '3116', '3121', '3122', '3123', '3124', '3125', '3126', '3131',
                '3132', '3133', '3134', '3135', '3136', '3141', '3142', '3143',
                '3144', '3145', '3146', '3151', '3152', '3153', '3154', '3155',
                '3156', '3161', '3162', '3163', '3164', '3165', '3166', '3211',
                '3212', '3213', '3214', '3215', '3216', '3221', '3231', '3241',
                '3251', '3261', '3311', '3312', '3313', '3314', '3315', '3316',
                '3321', '3331', '3341', '3351', '3361', '3411', '3412', '3413',
                '3414', '3415', '3416', '3421', '3431', '3441', '3451', '3461',
                '3511', '3512', '3513', '3514', '3515', '3516', '3521', '3531',
                '3541', '3551', '3561', '3611', '3612', '3613', '3614', '3615',
                '3616', '3621', '3631', '3641', '3651', '3661', '4111', '4112',
                '4113', '4114', '4115', '4116', '4121', '4122', '4123', '4124',
                '4125', '4126', '4131', '4132', '4133', '4134', '4135', '4136',
                '4141', '4142', '4143', '4144', '4145', '4146', '4151', '4152',
                '4153', '4154', '4155', '4156', '4161', '4162', '4163', '4164',
                '4165', '4166', '4211', '4212', '4213', '4214', '4215', '4216',
                '4221', '4231', '4241', '4251', '4261', '4311', '4312', '4313',
                '4314', '4315', '4316', '4321', '4331', '4341', '4351', '4361',
                '4411', '4412', '4413', '4414', '4415', '4416', '4421', '4431',
                '4441', '4451', '4461', '4511', '4512', '4513', '4514', '4515',
                '4516', '4521', '4531', '4541', '4551', '4561', '4611', '4612',
                '4613', '4614', '4615', '4616', '4621', '4631', '4641', '4651',
                '4661', '5111', '5112', '5113', '5114', '5115', '5116', '5121',
                '5122', '5123', '5124', '5125', '5126', '5131', '5132', '5133',
                '5134', '5135', '5136', '5141', '5142', '5143', '5144', '5145',
                '5146', '5151', '5152', '5153', '5154', '5155', '5156', '5161',
                '5162', '5163', '5164', '5165', '5166', '5211', '5212', '5213',
                '5214', '5215', '5216', '5221', '5231', '5241', '5251', '5261',
                '5311', '5312', '5313', '5314', '5315', '5316', '5321', '5331',
                '5341', '5351', '5361', '5411', '5412', '5413', '5414', '5415',
                '5416', '5421', '5431', '5441', '5451', '5461', '5511', '5512',
                '5513', '5514', '5515', '5516', '5521', '5531', '5541', '5551',
                '5561', '5611', '5612', '5613', '5614', '5615', '5616', '5621',
                '5631', '5641', '5651', '5661', '6111', '6112', '6113', '6114',
                '6115', '6116', '6121', '6122', '6123', '6124', '6125', '6126',
                '6131', '6132', '6133', '6134', '6135', '6136', '6141', '6142',
                '6143', '6144', '6145', '6146', '6151', '6152', '6153', '6154',
                '6155', '6156', '6161', '6162', '6163', '6164', '6165', '6166',
                '6211', '6212', '6213', '6214', '6215', '6216', '6221', '6231',
                '6241', '6251', '6261', '6311', '6312', '6313', '6314', '6315',
                '6316', '6321', '6331', '6341', '6351', '6361', '6411', '6412',
                '6413', '6414', '6415', '6416', '6421', '6431', '6441', '6451',
                '6461', '6511', '6512', '6513', '6514', '6515', '6516', '6521',
                '6531', '6541', '6551', '6561', '6611', '6612', '6613', '6614',
                '6615', '6616', '6621', '6631', '6641', '6651', '6661']

    assert context.retrieved == expected
